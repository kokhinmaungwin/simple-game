<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PNG to ICO Generator</title>
<style>
  body{font-family:Arial;padding:20px;text-align:center}
  input{margin-top:15px}
  canvas{display:none}
  button{padding:10px 18px;border:none;border-radius:8px;font-size:16px}
</style>
</head>
<body>

<h2>PNG âžœ ICO Generator</h2>

<input type="file" id="fileInput" accept="image/*"><br><br>
<button id="generateBtn">Generate ICO</button>

<canvas id="canvas" width="48" height="48"></canvas>

<script>
document.getElementById("generateBtn").onclick = async () => {
  const fileInput = document.getElementById("fileInput");
  if (!fileInput.files.length) {
    alert("Image file choose please ðŸ˜„");
    return;
  }

  const file = fileInput.files[0];
  const img = new Image();
  img.src = URL.createObjectURL(file);

  img.onload = () => {
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    // draw into 48x48 canvas
    ctx.clearRect(0, 0, 48, 48);
    ctx.drawImage(img, 0, 0, 48, 48);

    // ICO requires BMP inside .ico container (simple single-size)
    const bmp = canvas.toDataURL("image/bmp");

    fetch(bmp)
      .then(res => res.arrayBuffer())
      .then(buf => {
        const blob = new Blob([buf], { type: "image/x-icon" });
        const url = URL.createObjectURL(blob);

        const a = document.createElement("a");
        a.href = url;
        a.download = "favicon.ico";
        a.click();
      });
  };
};
</script>

</body>
</html>
